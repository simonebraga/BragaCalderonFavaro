<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="761px" preserveAspectRatio="none" style="width:1162px;height:761px;" version="1.1" viewBox="0 0 1162 761" width="1162px" zoomAndPan="magnify">
    <defs>
        <filter height="300%" id="f1om65harhmuj8" width="300%" x="-1" y="-1">
            <feGaussianBlur result="blurOut" stdDeviation="2.0" />
            <feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0" />
            <feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3" />
            <feBlend in="SourceGraphic" in2="blurOut3" mode="normal" />
        </filter>
    </defs>
    <g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="88" x="537.75" y="24.5332">Suggestions</text>
        <rect fill="#FFFFFF" filter="url(#f1om65harhmuj8)" height="533.8125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="72" y="129.2188" />
        <rect fill="#FFFFFF" filter="url(#f1om65harhmuj8)" height="533.8125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="366" y="129.2188" />
        <rect fill="#FFFFFF" filter="url(#f1om65harhmuj8)" height="344.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="614" y="272.9766" />
        <rect fill="#FFFFFF" filter="url(#f1om65harhmuj8)" height="284" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="817" y="303.3281" />
        <rect fill="#FFFFFF" filter="url(#f1om65harhmuj8)" height="223.2969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1010" y="333.6797" />
        <rect fill="#FFFFFF" filter="url(#f1om65harhmuj8)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1099.5" y="181.9219" />
        <rect fill="#FFFFFF" filter="url(#f1om65harhmuj8)" height="277" style="stroke: #000000; stroke-width: 2.0;" width="1040.5" x="13" y="379.0313" />
        <rect fill="#FFFFFF" height="137.2422" style="stroke: none; stroke-width: 1.0;" width="1040.5" x="13" y="518.7891" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="77" x2="77" y1="119.2188" y2="673.0313" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="370.5" x2="370.5" y1="119.2188" y2="673.0313" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="618.5" x2="618.5" y1="119.2188" y2="673.0313" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="822" x2="822" y1="119.2188" y2="673.0313" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1014.5" x2="1014.5" y1="119.2188" y2="673.0313" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1104.5" x2="1104.5" y1="119.2188" y2="673.0313" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="23" y="116.1426">MunicipalityUser</text>
        <ellipse cx="77" cy="44.6094" fill="#FEFECE" filter="url(#f1om65harhmuj8)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;" />
        <path d="M77,52.6094 L77,79.6094 M64,60.6094 L90,60.6094 M77,79.6094 L64,94.6094 M77,79.6094 L90,94.6094 " fill="none" filter="url(#f1om65harhmuj8)" style="stroke: #A80036; stroke-width: 2.0;" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="23" y="686.5645">MunicipalityUser</text>
        <ellipse cx="77" cy="699.6406" fill="#FEFECE" filter="url(#f1om65harhmuj8)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;" />
        <path d="M77,707.6406 L77,734.6406 M64,715.6406 L90,715.6406 M77,734.6406 L64,749.6406 M77,734.6406 L90,749.6406 " fill="none" filter="url(#f1om65harhmuj8)" style="stroke: #A80036; stroke-width: 2.0;" />
        <rect fill="#FEFECE" filter="url(#f1om65harhmuj8)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="49" x="344.5" y="82.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="351.5" y="104.1426">[APP]</text>
        <rect fill="#FEFECE" filter="url(#f1om65harhmuj8)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="49" x="344.5" y="672.0313" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="351.5" y="693.5645">[APP]</text>
        <rect fill="#FEFECE" filter="url(#f1om65harhmuj8)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="588.5" y="82.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="595.5" y="104.1426">Router</text>
        <rect fill="#FEFECE" filter="url(#f1om65harhmuj8)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="588.5" y="672.0313" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="595.5" y="693.5645">Router</text>
        <rect fill="#FEFECE" filter="url(#f1om65harhmuj8)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="749" y="82.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="756" y="104.1426">[QUERY MANAGER]</text>
        <rect fill="#FEFECE" filter="url(#f1om65harhmuj8)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="749" y="672.0313" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="756" y="693.5645">[QUERY MANAGER]</text>
        <rect fill="#FEFECE" filter="url(#f1om65harhmuj8)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="986.5" y="82.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="993.5" y="104.1426">DBMS</text>
        <rect fill="#FEFECE" filter="url(#f1om65harhmuj8)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="986.5" y="672.0313" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="993.5" y="693.5645">DBMS</text>
        <rect fill="#FEFECE" filter="url(#f1om65harhmuj8)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="1053.5" y="82.6094" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="1060.5" y="104.1426">Google Maps</text>
        <rect fill="#FEFECE" filter="url(#f1om65harhmuj8)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="1053.5" y="672.0313" /><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="1060.5" y="693.5645">Google Maps</text>
        <rect fill="#FFFFFF" filter="url(#f1om65harhmuj8)" height="533.8125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="72" y="129.2188" />
        <rect fill="#FFFFFF" filter="url(#f1om65harhmuj8)" height="533.8125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="366" y="129.2188" />
        <rect fill="#FFFFFF" filter="url(#f1om65harhmuj8)" height="344.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="614" y="272.9766" />
        <rect fill="#FFFFFF" filter="url(#f1om65harhmuj8)" height="284" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="817" y="303.3281" />
        <rect fill="#FFFFFF" filter="url(#f1om65harhmuj8)" height="223.2969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1010" y="333.6797" />
        <rect fill="#FFFFFF" filter="url(#f1om65harhmuj8)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1099.5" y="181.9219" />
        <polygon fill="#A80036" points="354,147.5703,364,151.5703,354,155.5703,358,151.5703" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="82" x2="360" y1="151.5703" y2="151.5703" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="89" y="146.7139">showSafeSuggestionsQueryPage()</text>
        <polygon fill="#A80036" points="1087.5,177.9219,1097.5,181.9219,1087.5,185.9219,1091.5,181.9219" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="376" x2="1093.5" y1="181.9219" y2="181.9219" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="383" y="177.0654">getQueryMap()</text>
        <polygon fill="#A80036" points="387,208.2734,377,212.2734,387,216.2734,383,212.2734" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="381" x2="1103.5" y1="212.2734" y2="212.2734" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="393" y="207.417">Map</text>
        <polygon fill="#A80036" points="93,238.625,83,242.625,93,246.625,89,242.625" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="87" x2="365" y1="242.625" y2="242.625" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="99" y="237.7686">SafeSuggestion query page</text>
        <polygon fill="#A80036" points="354,268.9766,364,272.9766,354,276.9766,358,272.9766" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="82" x2="360" y1="272.9766" y2="272.9766" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="89" y="268.1201">Geographical filters</text>
        <polygon fill="#A80036" points="602,299.3281,612,303.3281,602,307.3281,606,303.3281" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="376" x2="608" y1="303.3281" y2="303.3281" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="383" y="298.4717">sendSuggestionQuery(filter:geoFilter)</text>
        <polygon fill="#A80036" points="805,329.6797,815,333.6797,805,337.6797,809,333.6797" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="624" x2="811" y1="333.6797" y2="333.6797" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="631" y="328.8232">getSuggestion(filter:geoFilter)</text>
        <polygon fill="#A80036" points="998,360.0313,1008,364.0313,998,368.0313,1002,364.0313" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0;" x1="827" x2="1004" y1="364.0313" y2="364.0313" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="834" y="359.1748">getSuggestion(query:query)</text>
        <path d="M13,379.0313 L74,379.0313 L74,387.0313 L64,397.0313 L13,397.0313 L13,379.0313 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;" />
        <rect fill="none" height="277" style="stroke: #000000; stroke-width: 2.0;" width="1040.5" x="13" y="379.0313" /><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="28" y="393.5264">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="89" y="392.4502">[there are suggestions]</text>
        <polygon fill="#A80036" points="838,415.7344,828,419.7344,838,423.7344,834,419.7344" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="832" x2="1009" y1="419.7344" y2="419.7344" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="844" y="414.8779">Suggestions</text>
        <polygon fill="#A80036" points="635,446.0859,625,450.0859,635,454.0859,631,450.0859" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="629" x2="816" y1="450.0859" y2="450.0859" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="641" y="445.2295">Suggestions</text>
        <polygon fill="#A80036" points="387,476.4375,377,480.4375,387,484.4375,383,480.4375" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="381" x2="613" y1="480.4375" y2="480.4375" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="393" y="475.5811">Suggestions</text>
        <polygon fill="#A80036" points="93,506.7891,83,510.7891,93,514.7891,89,510.7891" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="87" x2="365" y1="510.7891" y2="510.7891" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="99" y="505.9326">displaySuggestions(suggestion:Suggestions)</text>
        <line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1053.5" y1="519.7891" y2="519.7891" /><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95" x="18" y="531.208">[no suggestions]</text>
        <polygon fill="#A80036" points="838,552.9766,828,556.9766,838,560.9766,834,556.9766" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="832" x2="1014" y1="556.9766" y2="556.9766" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="844" y="552.1201">No suggestions message</text>
        <polygon fill="#A80036" points="635,583.3281,625,587.3281,635,591.3281,631,587.3281" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="629" x2="821" y1="587.3281" y2="587.3281" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="641" y="582.4717">No suggestions message</text>
        <polygon fill="#A80036" points="387,613.6797,377,617.6797,387,621.6797,383,617.6797" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="381" x2="618" y1="617.6797" y2="617.6797" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="393" y="612.8232">No suggestion message</text>
        <polygon fill="#A80036" points="93,644.0313,83,648.0313,93,652.0313,89,648.0313" style="stroke: #A80036; stroke-width: 1.0;" />
        <line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="87" x2="365" y1="648.0313" y2="648.0313" /><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="99" y="643.1748">dispMessage(string:message)</text>
        <!--MD5=[24c1a165d2687c9da93ac0584f7cc777]
@startuml

title Suggestions

actor MunicipalityUser as user
participant "[APP]" as app
participant Router as rout
participant "[QUERY MANAGER]" as queryh
participant DBMS as db
participant "Google Maps" as google

activate user
activate app

  user -> app : showSafeSuggestionsQueryPage()
  app -> google : getQueryMap()

  activate google
    google - -> app : Map
  deactivate google

  app - -> user : SafeSuggestion query page
  user -> app : Geographical filters

  activate rout

    app -> rout : sendSuggestionQuery(filter:geoFilter)

    activate queryh

      rout -> queryh : getSuggestion(filter:geoFilter)

      activate db

        queryh -> db : getSuggestion(query:query)

        alt there are suggestions

          db - -> queryh : Suggestions
          queryh - -> rout : Suggestions
          rout - -> app : Suggestions
          app - -> user : displaySuggestions(suggestion:Suggestions)

        else no suggestions

          db - -> queryh : No suggestions message

        deactivate db

          queryh - -> rout : No suggestions message
        deactivate queryh
          rout - -> app : No suggestion message
        deactivate rout
          app - -> user : dispMessage(string:message)

        end

deactivate app
deactivate user

@enduml

PlantUML version 1.2019.11(Sun Sep 22 12:02:15 CEST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Java Version: 1.8.0_221-b11
Operating System: Windows 10
Default Encoding: Cp1252
Language: en
Country: US
-->
    </g>
</svg>